<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Webhooks &mdash; Webhooks 2014.05.20 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2014.05.20',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Webhooks 2014.05.20 documentation" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li><a href="index.html">Webhooks 2014.05.20 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="webhooks">
<h1>Webhooks<a class="headerlink" href="#webhooks" title="Permalink to this headline">¶</a></h1>
<div class="section" id="what-are-webhooks">
<h2>What are Webhooks?<a class="headerlink" href="#what-are-webhooks" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://en.wikipedia.org/wiki/Webhook">https://en.wikipedia.org/wiki/Webhook</a></li>
<li>A method of augmenting or altering the behavior of a web page, or web application, with custom callbacks.</li>
<li>The server pushes to the consumer, rather than the consumer pulls from the server.</li>
<li>Push (Webhook) vs Pull (Traditional API)</li>
<li>Great for SOA and SaaS</li>
</ul>
</div>
<div class="section" id="advantages-of-webhooks">
<h2>Advantages of Webhooks<a class="headerlink" href="#advantages-of-webhooks" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Performance friendly to server and client</li>
<li>The client doesn&#8217;t need to poll the server constantly</li>
<li>The server lets the client know when things are ready.</li>
</ul>
</div>
<div class="section" id="django-packages-example">
<h2>Django Packages Example<a class="headerlink" href="#django-packages-example" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Django Packages polls Github and BitBucket once every 24 hours for each package on the system.</li>
<li>Historical Note: 3.5 years ago we were asked by GitHub to change from hourly to daily.</li>
<li>In a short period of time we make about 7000 API requests.</li>
</ul>
</div>
<div class="section" id="django-packages-with-webhook">
<h2>Django Packages with Webhook<a class="headerlink" href="#django-packages-with-webhook" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Added a receiver view: <a class="reference external" href="http://bit.ly/djangopackages-webhook-view">http://bit.ly/djangopackages-webhook-view</a></li>
<li>You can add a webhook manually:</li>
<li><a class="reference external" href="https://www.djangopackages.com/packages/github-webhook/">https://www.djangopackages.com/packages/github-webhook/</a></li>
<li>Or add as a service (Demonstrate)</li>
</ul>
</div>
<div class="section" id="webhooks-are-great">
<h2>Webhooks are Great!<a class="headerlink" href="#webhooks-are-great" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Receiving them is easy.</li>
<li>Writing an extendable library to send them?</li>
<li>Let&#8217;s take a look!</li>
</ul>
</div>
<div class="section" id="building-a-webhook-library">
<h2>Building a Webhook Library<a class="headerlink" href="#building-a-webhook-library" title="Permalink to this headline">¶</a></h2>
<p>Design considerations</p>
<ul class="simple">
<li>Pleasant developer experience</li>
<li>Keep code abstraction to a minimum</li>
<li>Make introspectable</li>
<li>Make extending it very easy (functional vs OO)</li>
<li>Make new senders easy to write</li>
<li>Make tests easy to write</li>
</ul>
</div>
<div class="section" id="webhook-naming-problem">
<h2>Webhook Naming Problem<a class="headerlink" href="#webhook-naming-problem" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Webhooks is a terrible name.</li>
<li>Hook is for fishing</li>
<li>Hooking....</li>
</ul>
</div>
<div class="section" id="my-implementation">
<h2>My Implementation<a class="headerlink" href="#my-implementation" title="Permalink to this headline">¶</a></h2>
<p>Still in alpha/beta state, however:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/pydanny/webhooks">https://github.com/pydanny/webhooks</a></li>
<li><a class="reference external" href="https://github.com/pydanny/webhooks#usage">https://github.com/pydanny/webhooks#usage</a></li>
<li><a class="reference external" href="http://pypi.python.org/pypi/webhooks">http://pypi.python.org/pypi/webhooks</a></li>
</ul>
</div>
<div class="section" id="django-integration">
<h2>Django Integration<a class="headerlink" href="#django-integration" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://github.com/pydanny/dj-webhooks">https://github.com/pydanny/dj-webhooks</a></li>
<li><a class="reference external" href="https://github.com/pydanny/dj-webhooks#quickstart">https://github.com/pydanny/dj-webhooks#quickstart</a></li>
<li><a class="reference external" href="http://pypi.python.org/pypi/dj-webhooks">http://pypi.python.org/pypi/dj-webhooks</a></li>
</ul>
</div>
<div class="section" id="decorator-construction">
<h2>Decorator Construction<a class="headerlink" href="#decorator-construction" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Defined a base_hook function as a decorator</li>
<li><a class="reference external" href="https://github.com/pydanny/webhooks/blob/master/webhooks/decorators.py#L16-L49">https://github.com/pydanny/webhooks/blob/master/webhooks/decorators.py#L16-L49</a></li>
<li>Used partial to provide a good default</li>
<li><a class="reference external" href="https://github.com/pydanny/webhooks/blob/master/webhooks/decorators.py#L53">https://github.com/pydanny/webhooks/blob/master/webhooks/decorators.py#L53</a></li>
<li>Partial Reference: <a class="reference external" href="http://pydanny.com/python-partials-are-fun.html">http://pydanny.com/python-partials-are-fun.html</a></li>
</ul>
</div>
<div class="section" id="sender-construction">
<h2>Sender Construction<a class="headerlink" href="#sender-construction" title="Permalink to this headline">¶</a></h2>
<p>The sender_callable (function - handy, but not easily extendable)</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/pydanny/webhooks/blob/master/webhooks/senders/simple.py">https://github.com/pydanny/webhooks/blob/master/webhooks/senders/simple.py</a></li>
</ul>
<p>The senderable object (object - Easily extendable)</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/pydanny/webhooks/blob/master/webhooks/senders/base.py#L16-L111">https://github.com/pydanny/webhooks/blob/master/webhooks/senders/base.py#L16-L111</a></li>
</ul>
</div>
<div class="section" id="case-in-point-dj-webhooks-orm-sender">
<h2>Case in Point: dj-webhooks ORM sender<a class="headerlink" href="#case-in-point-dj-webhooks-orm-sender" title="Permalink to this headline">¶</a></h2>
<p>The sender_callable (function - copied, not extended)</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/pydanny/dj-webhooks/blob/master/djwebhooks/senders/orm.py#L73-L127">https://github.com/pydanny/dj-webhooks/blob/master/djwebhooks/senders/orm.py#L73-L127</a></li>
</ul>
<p>The senderable object (object - Easily extended)</p>
<ul class="simple">
<li>Senderablehttps://github.com/pydanny/dj-webhooks/blob/master/djwebhooks/senders/orm.py#L48-L70</li>
</ul>
</div>
<div class="section" id="functional-vs-oo">
<h2>Functional vs OO<a class="headerlink" href="#functional-vs-oo" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Functional code is awesome, but lean OO is great too</li>
<li>Both are great until they get bloated.</li>
<li>Don&#8217;t try to stick to a paradigm if doing so makes ugly code.</li>
</ul>
</div>
<div class="section" id="caching-and-encoding">
<h2>Caching and Encoding<a class="headerlink" href="#caching-and-encoding" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>webhooks needed something like <tt class="docutils literal"><span class="pre">django.utils.functional.cached_property</span></tt></li>
<li><a class="reference external" href="https://pypi.python.org/pypi/cached-property">https://pypi.python.org/pypi/cached-property</a> (with threading support!)</li>
<li>webhooks and dj-webhooks needed a better JSON encoder (tests!)</li>
<li><a class="reference external" href="https://pypi.python.org/pypi/json262">https://pypi.python.org/pypi/json262</a></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Webhooks</a><ul>
<li><a class="reference internal" href="#what-are-webhooks">What are Webhooks?</a></li>
<li><a class="reference internal" href="#advantages-of-webhooks">Advantages of Webhooks</a></li>
<li><a class="reference internal" href="#django-packages-example">Django Packages Example</a></li>
<li><a class="reference internal" href="#django-packages-with-webhook">Django Packages with Webhook</a></li>
<li><a class="reference internal" href="#webhooks-are-great">Webhooks are Great!</a></li>
<li><a class="reference internal" href="#building-a-webhook-library">Building a Webhook Library</a></li>
<li><a class="reference internal" href="#webhook-naming-problem">Webhook Naming Problem</a></li>
<li><a class="reference internal" href="#my-implementation">My Implementation</a></li>
<li><a class="reference internal" href="#django-integration">Django Integration</a></li>
<li><a class="reference internal" href="#decorator-construction">Decorator Construction</a></li>
<li><a class="reference internal" href="#sender-construction">Sender Construction</a></li>
<li><a class="reference internal" href="#case-in-point-dj-webhooks-orm-sender">Case in Point: dj-webhooks ORM sender</a></li>
<li><a class="reference internal" href="#functional-vs-oo">Functional vs OO</a></li>
<li><a class="reference internal" href="#caching-and-encoding">Caching and Encoding</a></li>
</ul>
</li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/notes.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li><a href="index.html">Webhooks 2014.05.20 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Daniel Greenfeld.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>